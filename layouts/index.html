<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Site.Title }}</title>
    <meta name="description" content="{{ .Site.Params.description }}">
    <link rel="stylesheet" href="{{ "css/style.css" | absURL }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header con foto arriba y nombre abajo -->
        <header class="header">
            <div class="header-content">
                <div class="profile-image">
                    <img src="{{ (.Site.Params.profileImage | default "images/profile.jpg") | absURL }}" alt="{{ .Site.Params.author }}" class="profile-img">
                </div>
                <div class="profile-section">
                    <h1 class="name">{{ .Site.Params.author }}</h1>
                    <p class="subtitle">{{ .Site.Params.description }}</p>
                </div>
            </div>
        </header>
        
        <!-- Links Section -->
        <main class="links-container">
            <div class="links-grid">
                {{ range .Site.Params.links }}
                <div class="link-card" data-link-id="{{ .id }}">
                    <div class="link-content" onclick="openLink('{{ .url }}')">
                        <div class="link-icon">
                            <i class="{{ .icon }}"></i>
                        </div>
                        <div class="link-info">
                            <h3 class="link-title">{{ .title }}</h3>
                            <p class="link-description">{{ .description }}</p>
                        </div>
                        <div class="link-arrow">
                            <i class="fas fa-external-link-alt"></i>
                        </div>
                    </div>
                    <div class="link-info-btn" onclick="openModal('{{ .id }}')">
                        <i class="fas fa-info-circle"></i>
                    </div>
                </div>
                {{ end }}
            </div>
        </main>
        
        <!-- Certifications Section -->
        <section class="certifications-section">
            <div class="certifications-container">
                <h2 class="section-title">üèÜ Certificaciones</h2>
                <div class="certifications-grid">
                    {{ range .Site.Params.certifications }}
                    <div class="certification-card">
                        <div class="certification-badge">
                            <img src="{{ (.badge) | absURL }}" alt="{{ .name }}" class="badge-image">
                        </div>
                        <div class="certification-info">
                            <h3 class="certification-name">{{ .name }}</h3>
                            <p class="certification-issuer">{{ .issuer }}</p>
                            <p class="certification-date">{{ .date }}</p>
                            {{ if .credential_url }}
                            <a href="{{ .credential_url }}" target="_blank" class="certification-link">
                                <i class="fas fa-external-link-alt"></i> Ver credencial
                            </a>
                            {{ end }}
                        </div>
                    </div>
                    {{ end }}
                </div>
            </div>
        </section>
        
        <!-- Timeline Section -->
        <section class="timeline-section">
            <div class="timeline-container">
                <div class="timeline-header">
                    <h2 class="timeline-title">üìÖ Timeline</h2>
                    <button class="timeline-toggle" onclick="toggleTimeline()">
                        <i class="fas fa-chevron-down" id="timeline-icon"></i>
                    </button>
                </div>
                <div class="timeline" id="timeline-content" style="display: none;">
                    {{ $timelinePages := where .Site.RegularPages "Section" "timeline" }}
                    {{ $timelinePages = $timelinePages.ByDate.Reverse }}
                    
                    {{ range $timelinePages.GroupByDate "2006" }}
                    <div class="timeline-year">
                        <h3 class="timeline-year-title">{{ .Key }}</h3>
                        
                        {{ $yearPages := .Pages }}
                        {{ range $quarterNum := (slice 4 3 2 1) }}
                            {{ $q4Start := 10 }}
                            {{ $q4End := 12 }}
                            {{ $q3Start := 7 }}
                            {{ $q3End := 9 }}
                            {{ $q2Start := 4 }}
                            {{ $q2End := 6 }}
                            {{ $q1Start := 1 }}
                            {{ $q1End := 3 }}
                            
                            {{ $startMonth := 1 }}
                            {{ $endMonth := 3 }}
                            {{ $quarterName := "Q1" }}
                            
                            {{ if eq $quarterNum 4 }}
                                {{ $startMonth = $q4Start }}
                                {{ $endMonth = $q4End }}
                                {{ $quarterName = "Q4" }}
                            {{ else if eq $quarterNum 3 }}
                                {{ $startMonth = $q3Start }}
                                {{ $endMonth = $q3End }}
                                {{ $quarterName = "Q3" }}
                            {{ else if eq $quarterNum 2 }}
                                {{ $startMonth = $q2Start }}
                                {{ $endMonth = $q2End }}
                                {{ $quarterName = "Q2" }}
                            {{ end }}
                            
                            {{ $quarterPages := where $yearPages "Date.Month" ">=" $startMonth }}
                            {{ $quarterPages = where $quarterPages "Date.Month" "<=" $endMonth }}
                            
                            {{ if $quarterPages }}
                        <div class="timeline-quarter">
                            <h4 class="timeline-quarter-title">{{ $quarterName }} {{ (index $quarterPages 0).Date.Year }}</h4>
                            
                            {{ $activePages := where $quarterPages "Params.status" "!=" "done" }}
                            {{ $completedPages := where $quarterPages "Params.status" "eq" "done" }}
                            
                            {{ range $activePages }}
                            {{ $status := .Params.status | default "todo" }}
                            {{ $statusLabel := "" }}
                            {{ $statusIcon := "" }}
                            {{ if eq $status "done" }}
                                {{ $statusLabel = "Completado" }}
                                {{ $statusIcon = "fas fa-check-circle" }}
                            {{ else if eq $status "inprocess" }}
                                {{ $statusLabel = "En Proceso" }}
                                {{ $statusIcon = "fas fa-clock" }}
                            {{ else }}
                                {{ $statusLabel = "Pendiente" }}
                                {{ $statusIcon = "fas fa-circle" }}
                            {{ end }}
                            
                            {{ $month := .Date.Month }}
                            {{ $day := .Date.Day }}
                            {{ $dayOfYear := 0 }}
                            
                            {{ if eq $month 1 }}{{ $dayOfYear = $day }}
                            {{ else if eq $month 2 }}{{ $dayOfYear = add 31 $day }}
                            {{ else if eq $month 3 }}{{ $dayOfYear = add 59 $day }}
                            {{ else if eq $month 4 }}{{ $dayOfYear = add 90 $day }}
                            {{ else if eq $month 5 }}{{ $dayOfYear = add 120 $day }}
                            {{ else if eq $month 6 }}{{ $dayOfYear = add 151 $day }}
                            {{ else if eq $month 7 }}{{ $dayOfYear = add 181 $day }}
                            {{ else if eq $month 8 }}{{ $dayOfYear = add 212 $day }}
                            {{ else if eq $month 9 }}{{ $dayOfYear = add 243 $day }}
                            {{ else if eq $month 10 }}{{ $dayOfYear = add 273 $day }}
                            {{ else if eq $month 11 }}{{ $dayOfYear = add 304 $day }}
                            {{ else if eq $month 12 }}{{ $dayOfYear = add 334 $day }}
                            {{ end }}
                            
                            {{ $weekNumber := div $dayOfYear 7 | add 1 }}
                            
                            <div class="timeline-item" data-status="{{ $status }}">
                                <div class="timeline-date">
                                    <span class="date">{{ .Date.Format "Jan 02, 2006" }}</span>
                                    <span class="week-number">Semana {{ $weekNumber }}</span>
                                </div>
                                <div class="timeline-content">
                                    <div class="timeline-status">
                                        <span class="status-badge status-{{ $status }}">
                                            <i class="{{ $statusIcon }}"></i> {{ $statusLabel }}
                                        </span>
                                    </div>
                                    <h3 class="timeline-item-title">{{ .Title }}</h3>
                                    <p class="timeline-item-description">{{ .Params.description }}</p>
                                    <div class="timeline-item-meta">
                                        <span class="timeline-category">{{ .Params.category }}</span>
                                        <button class="timeline-link" onclick='openTimelineModal({{ .Title | jsonify }}, {{ .Params.description | jsonify }}, {{ .Params.category | jsonify }}, {{ .Date.Format "Jan 02, 2006" | jsonify }}, {{ $status | jsonify }})'>
                                            <i class="fas fa-info-circle"></i> Ver m√°s
                                        </button>
                                    </div>
                                </div>
                            </div>
                            {{ end }}
                            
                            {{ if $completedPages }}
                            <div class="completed-section">
                                <button class="completed-toggle" onclick="toggleCompleted(this)">
                                    <i class="fas fa-chevron-down"></i>
                                    <span>Tareas completadas ({{ len $completedPages }})</span>
                                </button>
                                <div class="completed-items" style="display: none;">
                                    {{ range $completedPages }}
                                    {{ $status := .Params.status | default "todo" }}
                                    {{ $statusLabel := "Completado" }}
                                    {{ $statusIcon := "fas fa-check-circle" }}
                                    
                                    {{ $month := .Date.Month }}
                                    {{ $day := .Date.Day }}
                                    {{ $dayOfYear := 0 }}
                                    
                                    {{ if eq $month 1 }}{{ $dayOfYear = $day }}
                                    {{ else if eq $month 2 }}{{ $dayOfYear = add 31 $day }}
                                    {{ else if eq $month 3 }}{{ $dayOfYear = add 59 $day }}
                                    {{ else if eq $month 4 }}{{ $dayOfYear = add 90 $day }}
                                    {{ else if eq $month 5 }}{{ $dayOfYear = add 120 $day }}
                                    {{ else if eq $month 6 }}{{ $dayOfYear = add 151 $day }}
                                    {{ else if eq $month 7 }}{{ $dayOfYear = add 181 $day }}
                                    {{ else if eq $month 8 }}{{ $dayOfYear = add 212 $day }}
                                    {{ else if eq $month 9 }}{{ $dayOfYear = add 243 $day }}
                                    {{ else if eq $month 10 }}{{ $dayOfYear = add 273 $day }}
                                    {{ else if eq $month 11 }}{{ $dayOfYear = add 304 $day }}
                                    {{ else if eq $month 12 }}{{ $dayOfYear = add 334 $day }}
                                    {{ end }}
                                    
                                    {{ $weekNumber := div $dayOfYear 7 | add 1 }}
                                    
                                    <div class="timeline-item" data-status="{{ $status }}">
                                        <div class="timeline-date">
                                            <span class="date">{{ .Date.Format "Jan 02, 2006" }}</span>
                                            <span class="week-number">Semana {{ $weekNumber }}</span>
                                        </div>
                                        <div class="timeline-content">
                                            <div class="timeline-status">
                                                <span class="status-badge status-{{ $status }}">
                                                    <i class="{{ $statusIcon }}"></i> {{ $statusLabel }}
                                                </span>
                                            </div>
                                            <h3 class="timeline-item-title">{{ .Title }}</h3>
                                            <p class="timeline-item-description">{{ .Params.description }}</p>
                                            <div class="timeline-item-meta">
                                                <span class="timeline-category">{{ .Params.category }}</span>
                                                <button class="timeline-link" onclick='openTimelineModal({{ .Title | jsonify }}, {{ .Params.description | jsonify }}, {{ .Params.category | jsonify }}, {{ .Date.Format "Jan 02, 2006" | jsonify }}, {{ $status | jsonify }})'>
                                                    <i class="fas fa-info-circle"></i> Ver m√°s
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    {{ end }}
                                </div>
                            </div>
                            {{ end }}
                            
                        </div>
                            {{ end }}
                        {{ end }}
                    </div>
                    {{ end }}
                </div>
            </div>
        </section>
        
        <!-- Modal -->
        <div id="linkModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">&times;</span>
                <div class="modal-body">
                    <div class="modal-image">
                        <img id="modalImage" src="" alt="">
                    </div>
                    <div class="modal-info">
                        <h2 id="modalTitle"></h2>
                        <p id="modalDescription"></p>
                        <a id="modalLink" href="#" class="modal-link-btn" target="_blank">
                            <i class="fas fa-external-link-alt"></i> Visitar
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Timeline Modal -->
        <div id="timelineModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeTimelineModal()">&times;</span>
                <div class="modal-body">
                    <div class="modal-image">
                        <div class="timeline-modal-icon">
                            <i id="timelineModalIcon" class="fas fa-info-circle"></i>
                        </div>
                    </div>
                    <div class="modal-info">
                        <div class="timeline-modal-meta">
                            <span id="timelineModalDate" class="timeline-modal-date"></span>
                            <span id="timelineModalStatus" class="timeline-modal-status"></span>
                        </div>
                        <h2 id="timelineModalTitle"></h2>
                        <p id="timelineModalDescription"></p>
                        <div class="timeline-modal-category">
                            <span id="timelineModalCategory"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer class="footer">
            <p>&copy; {{ now.Format "2006" }} {{ .Site.Params.author }}. Hecho con ‚ù§Ô∏è y Hugo.</p>
        </footer>
    </div>
    
    <script src="{{ "js/script.js" | absURL }}"></script>
</body>
</html>
